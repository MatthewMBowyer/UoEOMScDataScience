<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Grump Grump Cycle Guide</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"/>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Pacifico&display=swap');

    :root{
      --maxw: 1200px;        /* wider on laptops */
      --panel-pad: 22px;
      --text: 18px;          /* bigger base text */
      --text-lg: 20px;
    }

    body{
      font-family:'Arial',sans-serif;
      background-image:url('images/grumpgrump.png'); /* your bg */
      background-size:cover;background-position:center;margin:0;min-height:100vh;
      display:flex;flex-direction:column;align-items:center;padding:80px 24px 48px;
    }
    h1{
      font-family:'Pacifico',cursive;color:#fff;margin:0 0 18px;text-shadow:2px 2px #ff66ff;
      background:rgba(255,255,255,.3);padding:10px 20px;border-radius:15px
    }
    .sub{
      color:#2b2b2b;background:rgba(255,255,255,.85);padding:12px 18px;border-radius:12px;
      font-size:14px;max-width:var(--maxw);text-align:center;margin-bottom:16px
    }
    .main-container{display:flex;flex-direction:column;align-items:center;width:100%;max-width:var(--maxw);gap:16px}
    .button-row{display:flex;flex-wrap:wrap;gap:10px;justify-content:center;width:100%}
    button{
      font-size:16px;padding:12px 16px;cursor:pointer;border:none;border-radius:10px;background:#ff66ff;color:#fff;
      display:inline-flex;align-items:center;gap:8px;box-shadow:0 4px #cc33cc
    }
    button:hover{background:#ff33ff}
    button:active{background:#ff33ff;box-shadow:0 2px #cc33cc;transform:translateY(2px)}

    .panel{
      width:100%;
      max-width:var(--maxw);
      background:#fff;border-radius:14px;box-shadow:0 0 14px rgba(0,0,0,.12);padding:var(--panel-pad)
    }

    .pill{display:inline-block;font-size:13px;background:#ffe6ff;color:#8a2be2;border:1px solid #ffb3ff;
      border-radius:999px;padding:6px 12px;margin-right:8px;margin-bottom:8px}
    .meta{font-size:15px;color:#444;line-height:1.6;margin-top:4px}
    #message{white-space:pre-wrap;font-size:var(--text);line-height:1.65;color:#222}

    @media (min-width: 1200px){
      :root{ --text: var(--text-lg); }
      #message{line-height:1.7}
      .sub{font-size:15px}
      button{font-size:17px}
    }
  </style>
</head>
<body>
  <h1>Grump Grump üíï</h1>
  <div class="sub">‚ÄúHi it‚Äôs me, Grump Grump. Click a phase and I‚Äôll tell you why I‚Äôm extra lovey-lovey or extra grump-grump, with real facts.‚Äù</div>

  <div class="main-container">
    <!-- Controls -->
    <div class="button-row">
      <button id="guessBtn"><i class="fas fa-magic"></i> What phase am I today?</button>
      <button data-phase="menstruation"><i class="fas fa-droplet"></i> Menstruation</button>
      <button data-phase="follicular"><i class="fas fa-seedling"></i> Follicular</button>
      <button data-phase="ovulation"><i class="fas fa-star"></i> Ovulation Window</button>
      <button data-phase="luteal"><i class="fas fa-moon"></i> Luteal</button>
    </div>

    <!-- Status / Guess -->
    <div class="panel" id="status">
      <div id="statusHeader" class="meta"></div>
      <div id="chips"></div>
      <div class="meta" style="margin-top:6px;">
      <!--  Using your dates: Jun 2‚Äì7, Jul 2‚Äì5, Aug 1‚Äì6, Sep 2‚Äì7 (expected). Average cycle is estimated from these starts. -->
      </div>
    </div>

    <!-- Content -->
    <div class="panel">
      <div id="message"></div>
    </div>
  </div>

  <script>
    // ===== Fixed defaults from you (no adding/removing) =====
    const defaultStarts = [
      { date: '2025-06-02', periodLen: 6 },
      { date: '2025-07-02', periodLen: 4 },
      { date: '2025-08-01', periodLen: 6 },
      { date: '2025-09-02', periodLen: 6 } // expected
    ];

    // ===== Utilities =====
    const fmt = (d) => d.toLocaleDateString(undefined, { year: 'numeric', month: 'short', day: 'numeric' });
    const daysBetween = (a,b) => Math.round((b - a)/(1000*60*60*24));
    const clamp = (x,min,max)=>Math.max(min,Math.min(max,x));

    function averageCycleLength(){
      // Use gaps between fixed starts
      const dates = defaultStarts.map(s=>new Date(s.date));
      const gaps = [];
      for (let i=0;i<dates.length-1;i++) gaps.push(daysBetween(dates[i], dates[i+1]));
      const avg = gaps.length ? gaps.reduce((s,x)=>s+x,0)/gaps.length : 31;
      return Math.round(avg);
    }

    function estimateCurrent(){
      const today = new Date();
      const dates = defaultStarts.map(s=>new Date(s.date));
      let lastStart = dates[0];
      for (const d of dates){ if (d<=today) lastStart = d; }

      const avgLen = averageCycleLength();
      const cycleDay = daysBetween(lastStart, today) + 1;
      const nextStart = new Date(lastStart.getTime() + avgLen*24*3600*1000);
      const daysToNext = daysBetween(today, nextStart);

      const ovuDay = clamp(avgLen - 14, 10, 20);
      const ovuWindow = { start: ovuDay-2, peak: ovuDay, end: ovuDay+2 };

      const found = defaultStarts.find(s=> new Date(s.date).getTime()===lastStart.getTime());
      const bleedLen = found?.periodLen || 6;

      let phase = '';
      if (cycleDay <= bleedLen)      phase = 'menstruation';
      else if (cycleDay < ovuWindow.start)                 phase = 'follicular';
      else if (cycleDay >= ovuWindow.start && cycleDay <= ovuWindow.end) phase = 'ovulation';
      else                           phase = 'luteal';

      return { today, lastStart, nextStart, avgLen, cycleDay, daysToNext, ovuWindow, phase };
    }

    function titleFor(p){
      if (p==='menstruation') return 'Menstruation';
      if (p==='follicular')   return 'Follicular';
      if (p==='ovulation')    return 'Ovulation Window';
      if (p==='luteal')       return 'Luteal';
      return 'Phase';
    }
    function vibeLine(phase){
      if (phase==='menstruation') return 'This week I might be extra grump-grump. Warm hugs > loud plans.';
      if (phase==='follicular')   return 'This week I‚Äôm extra lovey-lovey and sparky. Book the cute date!';
      if (phase==='ovulation')    return 'This week I‚Äôm main-character lovey-lovey. Flirty & fun, handle with care. üòò';
      if (phase==='luteal')       return 'This week can swing grump-grump. Snacks, structure, and reassurance please.';
      return '';
    }

    function renderChips(info){
      const chipsEl = document.getElementById('chips');
      chipsEl.innerHTML = '';
      const add = t => { const s = document.createElement('span'); s.className='pill'; s.textContent=t; chipsEl.appendChild(s); };
      add(`Avg cycle ‚âà ${info.avgLen} days`);
      add(`Last start: ${fmt(info.lastStart)}`);
      add(`Cycle day: ${info.cycleDay}`);
      add(`Next start est: ${fmt(info.nextStart)} (${info.daysToNext} days)`);
      add(`Ovulation window: ~CD ${info.ovuWindow.start}-${info.ovuWindow.end}`);
      add(`Today‚Äôs guess: ${titleFor(info.phase)}`);
    }

    // ===== Content (cute + factual) =====
    const content = {
      menstruation: `Hi, it‚Äôs your Grump Grump on **Menstruation** (Days 1‚Äì6-ish). üíó
This week I might be **extra grump-grump** but also secretly wanting cuddles‚Ä¶

**What‚Äôs cooking hormonally (facts):**
‚Ä¢ Estrogen & progesterone drop ‚Üí lower mood/energy; prostaglandins = cramps.
‚Ä¢ Iron loss can add fatigue/headaches; temperature at baseline.

**How to love me best:**
‚Ä¢ Heat pack, gentle walks, stretching. Iron + Vit C, magnesium help.
‚Ä¢ Lower-intensity training or technique work; I‚Äôll decide if heavier is okay.

**Mood & cuddles:** blanket burrito mode is valid. If I‚Äôm short, it‚Äôs the endometrium‚Äôs farewell party.

**Red flags:** flooding, >8 days, severe pain, dizziness ‚Üí clinician chat.
`,

      follicular: `Grump Grump in **Follicular** (post-period ‚Üí pre-ovulation). üå±
I‚Äôm **extra lovey-lovey**, brighter, and ready to plan cute things.

**Hormone facts:**
‚Ä¢ Rising estrogen (FSH follicles) ‚Üí energy, mood, verbal sparkle.
‚Ä¢ Cervical mucus: dry/sticky ‚Üí creamy ‚Üí more fluid nearing ovulation.

**Love me like this:**
‚Ä¢ Socials/projects now. Training: volume, speed, learning blocks thrive.
‚Ä¢ Protein + complex carbs; omega-3s for recovery.

**Why it tracks:** estradiol boosts serotonin/dopamine and adaptation to training.
`,

      ovulation: `**Ovulation Window** üí´
I‚Äôm **main-character lovey-lovey** and a little feral (in a cute way).

**Hormone fireworks:**
‚Ä¢ LH surge triggers ovulation; estrogen peaks; mucus is clear + stretchy (fertile).

**Do‚Äôs:**
‚Ä¢ Dates/compliments/play. Power/PRs if my body says yes (warm joints well).
‚Ä¢ If avoiding pregnancy, note: this is the fertile zone.

**Why it tracks:** estrogen peak + LH surge = social drive + fertile signs.
`,

      luteal: `**Luteal** üåô
I might be **extra grump-grump** or just nesting with snacks.

**Hormone rhythm:**
‚Ä¢ Progesterone rises (temp slightly up); near the end both hormones drop ‚Üí PMS.
‚Ä¢ Bloating, tenderness, sleep changes possible.

**Care plan:**
‚Ä¢ Structure, reassurance, magnesium, B-vits, fiber, electrolytes.
‚Ä¢ Training: keep intensity, trim volume if recovery slows.

**Why it tracks:** progesterone thermogenic/sedating; premenstrual withdrawal affects mood & water balance.
`
    };

    // ===== UI Actions =====
    function showPhase(phase){
      document.getElementById('message').textContent = content[phase] || 'Pick a phase, silly goose. ‚Äì Grump Grump';
      const info = estimateCurrent();
      document.getElementById('statusHeader').innerHTML =
        `<b>Viewing:</b> ${titleFor(phase)} ‚Ä¢ <i>‚Äú${vibeLine(phase)}‚Äù</i>`;
      if (info) renderChips(info);
    }

    function showGuess(){
      const info = estimateCurrent();
      if (!info) return;
      document.getElementById('statusHeader').innerHTML =
        `<b>Guess for today:</b> ${titleFor(info.phase)} ‚Ä¢ <i>‚Äú${vibeLine(info.phase)}‚Äù</i>`;
      renderChips(info);
      document.getElementById('message').textContent = content[info.phase];
    }

    // ===== Event wiring =====
    document.getElementById('guessBtn').addEventListener('click', showGuess);
    document.querySelectorAll('button[data-phase]').forEach(b=>{
      b.addEventListener('click', ()=> showPhase(b.getAttribute('data-phase')));
    });

    // ===== Init =====
    (function init(){
      const info = estimateCurrent();
      if (info){
        document.getElementById('statusHeader').innerHTML =
          `<b>Guess for today:</b> ${titleFor(info.phase)} ‚Ä¢ <i>‚Äú${vibeLine(info.phase)}‚Äù</i>`;
        renderChips(info);
      } else {
        document.getElementById('statusHeader').textContent = 'Unable to estimate phase.';
      }
    })();
  </script>
</body>
</html>
